var NUM_ITEMS = 3;var tabelms = ["Cine", "Infantiles", "Series", "Documentales", "Eventos"];var tabacts = ["movie", "children", "serie", "documentary", "special"];var tabs;/*functions*/window.onresize = function(){	var el = document.getElementById("hightlight_popup_fg");	var el2 = document.getElementById("hightlight_popup_bg");	var s = getPageSize();	el2.style.width = s.w + "px";	el2.style.height = s.h + "px";	var s = getWindowSize();	var s2 = getPageScroll();	el.style.left = ((s.w)/2+s2.w - 598/2) + "px";	el.style.top = ((s.h)/2+s2.h - 278/2) + "px";};
function timeFormat(str){	var mer = "am";	var out = str.substring(0,5).split(":");	if(out[0]>12)	{		mer = "pm";		out[0] = out[0] - 12;	}	return out[0] + ":" + out[1] + " " + mer;};
function toggleTab(el){	tab_col = tabs.childNodes;	for(i=0; i<tabelms.length;i++)	{		if(tab_col[i] == el )			tab_col[i].className = "enable";		else			tab_col[i].className = "disable";	}};
function createSinopsisTabs(node){	tabs = document.createElement("ul");	tabs.id = "ppa_syn_tabs";	tabs.className = "ppa_syn_tabs";	for(i=0; i<tabelms.length;i++)	{			var tab = document.createElement("li");			tab.onclick = new Function("var el = document.getElementById('highlighs_container');el.innerHTML = 'Cargando...';getHighlights('" + tabacts[i] + "');toggleTab(this)");			tab.innerHTML = tabelms[i];			tabs.appendChild(tab);	}	tabs.firstChild.className = "enable";	return tabs;};
function createSinopsisPopupItem(node){	var cont = document.createElement("div");	var cls = document.createElement("img");	var img = document.createElement("img");	var txt = document.createElement("div");	cls.src = WEB_GRID_LOCATION + "images/close.gif";	cls.className = "close";	cont.appendChild(cls);	cont.appendChild(img);	cont.appendChild(txt);	cont.className = "sinCont";	img.className = "picture";	cont.onclick = hideHighlightPopUp;	txt.className = "sinop";	if(node.getElementsByTagName("img").item(0).firstChild)		img.src = node.getElementsByTagName("img").item(0).firstChild.nodeValue;	txt.innerHTML += "<h1>" + node.getElementsByTagName("tit").item(0).firstChild.nodeValue + "</h1>";	txt.innerHTML += "<h2>" + node.getElementsByTagName("chn").item(0).firstChild.nodeValue + " - " 		+ node.getAttribute("date") + " "		+ timeFormat(node.getAttribute("time")) + "</h2>";	txt.innerHTML += node.getElementsByTagName("desc").item(0).firstChild.nodeValue;		return cont;};
function createSinopsisItem(node){	var cont = document.createElement("div");	var img = document.createElement("img");	var txt = document.createElement("div");	cont.appendChild(img);	cont.appendChild(txt);	cont.className = "sinCont";	cont.onclick = new Function("showHighlightPopUp(" + node.getAttribute("id") + ")");	txt.className = "sinop";		img.src = node.getElementsByTagName("img").item(0).firstChild.nodeValue;	txt.innerHTML += "<h1>" + node.getElementsByTagName("tit").item(0).firstChild.nodeValue + "</h1>";	txt.innerHTML += "<h2>" + node.getElementsByTagName("chn").item(0).firstChild.nodeValue + " - " 		+ node.getAttribute("date") + " "		+ timeFormat(node.getAttribute("time")) + "</h2>";		if(node.getElementsByTagName("desc").item(0).firstChild.nodeValue.length>150)		txt.innerHTML += node.getElementsByTagName("desc").item(0).firstChild.nodeValue.substring(0,150) + "...";	else		txt.innerHTML += node.getElementsByTagName("desc").item(0).firstChild.nodeValue;		txt.innerHTML += "<div class=\"vermas\">ver más</div>";	return cont;};
function getHighlightsAsync( ht ){	var el = document.getElementById("highlighs_container");	el.innerHTML = "";	var hl_el = ppaGetMainNode(ht.responseXML);	var hls = hl_el.childNodes;	var maxi = hls.length;	for(var i=0; i<maxi; i++)	{		el.appendChild( createSinopsisItem(hls.item(i)));	}		};
function getHighlights( cat ){	var _url = SERVICES_PATH + "?action=highlights&mode=category&c=" + cat + "&q=" + NUM_ITEMS;	var ht = new HTTPRequest( );	ht.timeout = 2000;	ht.url = _url;	ht.onError = showError;	ht.cache = false;	ht.onSuccess = getHighlightsAsync;	ht.process( );}function hideHighlightPopUp(){	document.getElementById("hightlight_popup_bg").style.display = "none";	document.getElementById("hightlight_popup_fg").style.display = "none";};
function unhideHighlightPopUp(){	var s = getWindowSize();	var el = document.getElementById("hightlight_popup_fg");	el.innerHTML = "Cargando...";	el.style.left = (s.w/2 - 598/2) + "px";	el.style.top = (s.h/2 - 278/2) + "px";	document.getElementById("hightlight_popup_bg").style.display = "block";	document.getElementById("hightlight_popup_fg").style.display = "block";};
function showHighlightPopUpAsync(ht){	var el = document.getElementById("hightlight_popup_fg");	var el2 = document.getElementById("hightlight_popup_bg");	el.innerHTML = "";	var s = getPageSize();	el2.style.width = s.w + "px";	el2.style.height = s.h + "px";	var s = getWindowSize();	var s2 = getPageScroll();	el.style.left = ((s.w)/2+s2.w - 598/2) + "px";	el.style.top = ((s.h)/2+s2.h - 278/2) + "px";	var hl_el = ppaGetMainNode(ht.responseXML);	var hls = hl_el.childNodes;	var maxi = hls.length;	for(var i=0; i<maxi; i++)	{		el.appendChild( createSinopsisPopupItem( hls.item(i)) );	}};
function showHighlightPopUp(hid){	var _url = SERVICES_PATH + "?action=highlights&mode=highlight&id=" + hid;	var ht = new HTTPRequest();	ht.timeout = 2000;	ht.url = _url;	ht.onError = showError;	ht.onSuccess = showHighlightPopUpAsync;	ht.async = true;	ht.cache = false;	ht.process( );	unhideHighlightPopUp();};
function createHighlights(){	document.write('<div id="highlighs_tabs_container"></div><div id="highlighs_container_top"><div id="highlighs_container">Cargando...</div></div><div id="hightlight_popup_bg"></div><div id="hightlight_popup_fg"></div>');	document.getElementById("highlighs_tabs_container").appendChild( createSinopsisTabs() );	setTimeout('getHighlights("movie")',500);};
